# 通过克隆实例恢复到主实例 {#concept_tmr_3b1_ydb .concept}

用户对数据库误操作引起的损失可以通过数据恢复功能最大程度地减少。目前RDS提供“按备份集”和“按时间点”两种恢复方式。

目前，RDS的如下实例支持创建克隆实例。若需要恢复其它数据库的数据，请参见[通过临时实例恢复到主实例](intl.zh-CN/用户指南/备份与恢复/恢复 SQL Server/PPAS/PostgreSQL 数据/通过临时实例恢复到主实例.md#)。

-   MySQL 5.5、5.6、5.7 的主实例（不包括MySQL 5.7基础版）

-   SQL Server 2016 高可用系列（包括标准版和企业版）

-   SQL Server 2012 高可用系列（包括标准版和企业版）


## 注意事项 {#section_jdm_t11_ydb .section}

-   数据迁移只会将源数据库的数据（结构）复制一份到目标数据库，并不会对源数据库数据（结构）造成影响。

-   数据迁移过程中，不支持DDL操作，如进行DDL操作可能导致迁移失败。

-   克隆实例是新建实例，与普通实例计费方式相同，价格详情请参见[云数据库RDS价格](https://www.alibabacloud.com/zh/product/apsaradb-for-rds#pricing)。


## 操作步骤 {#section_jtd_v11_ydb .section}

1.  登录[RDS 管理控制台](https://rds.console.aliyun.com/) 。
2.  选择目标实例所在地域。
3.  单击目标实例的ID，进入基本信息页面。
4.  恢复数据到克隆实例，详细操作步骤请参见[创建克隆实例](intl.zh-CN/用户指南/备份与恢复/创建克隆实例.md#)。
5.  克隆实例创建完成后，回到主实例的基本信息页面。
6.  单击页面右上角的**迁移数据库**，进入[数据传输（DTS）](http://dts.console.aliyun.com/)控制台。
7.  选择左侧导航栏中的**数据迁移**，进入迁移任务列表页面。
8.  单击**创建迁移任务**，进入创建迁移任务页面。
9.  输入任务名称、源数据库信息和目标数据库信息。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7959/3948_zh-CN.png)

    参数说明：

    -   任务名称：默认情况下，DTS为每个任务自动生成一个任务名称，您可以修改这个名称，为任务配置一个具备业务意义的名称，便于后续的任务识别。

    -   源库信息：

        -   实例类型：数据库的实例类型，选择RDS实例。

        -   实例地区：选择与主实例相同的地域。

        -   RDS实例ID：单击下拉菜单，选择克隆实例的ID。

        -   数据库账号：与主实例账号一致，且该账号必须具有对所有要迁移数据的读/写权限。

        -   数据库密码：与主实例账号的密码一致。

    -   目标库信息

        -   实例类型：默认为RDS实例。

        -   实例地区：主实例所在地域。

        -   RDS实例ID：目标RDS实例的ID。单击下拉菜单选择克隆实例所对应的主实例ID。

        -   数据库账号：主实例账号，该账号必须具有对所有要迁移数据的读/写权限。

        -   数据库密码：主实例账号的密码。

10. 单击**授权白名单并进入下一步**，进入迁移类型及列表页面。
11. 选择迁移类型，并在**迁移对象**栏中选择要迁移的对象，单击**\>**将要迁移的对象放入已选择对象栏中，如下图所示。如果要修改迁移对象在目标数据库上的名字，可以在已选择对象中，将鼠标放在需要修改的数据库上面，即会显示出**编辑**按钮，如下图所示。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7959/3949_zh-CN.png)

12. 单击**预检查并启动**。

    **说明：** 

    -   在迁移任务正式启动之前，会先进行前置预检查，只有预检查通过后，才能成功启动迁移。

    -   以下以预检查不通过为例进行描述。如果预检查通过，请直接跳转至步骤16。

13. 若系统显示预检查失败结果，单击检测结果为失败的检测项后的**!**，查看失败详细信息，如下图所示。根据失败原因修复后，可在数据迁移任务列表中选择该任务，并重新进行预检查。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7959/3951_zh-CN.png)

14. 错误排查完毕后，在迁移任务列表页面，选择新创建的迁移任务，单击**启动**，如下图所示。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7959/3952_zh-CN.png)

15. 若系统显示预检查通过信息，单击**确定**。
16. 在购买配置确认页面，确认配置信息并勾选**《数据传输（按量付费）服务条款》**，单击**立即购买并启动**。

