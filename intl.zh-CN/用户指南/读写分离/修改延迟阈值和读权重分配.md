# 修改延迟阈值和读权重分配 {#concept_ldz_h4p_wdb .concept}

当您开通了读写分离功能后，您可以根据需求修改读写分离的延迟阈值和读权重分配。

## 操作步骤 {#section_rbc_l4p_wdb .section}

1.  登录[RDS管理控制台](https://rdsnew.console.aliyun.com/console/index#/rdsList/)。
2.  选择目标实例所在地域。
3.  单击目标实例的ID，进入基本信息页面。
4.  选择左侧菜单栏中的**数据库连接**，进入数据库连接页面。
5.  选择**读写分离**标签页。
6.  单击**设置读写分离**，进入设置读写分离页面，如下图所示。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7916/15330314133100_zh-CN.png)

    **说明：** 设置权重时，可以查询到主实例下所有的只读实例（含设置延时复制的只读实例），但不允许您为已经设置了[只读实例延时复制](intl.zh-CN/.md#)时间的实例设置权重。

7.  修改设置信息，设置项详情如下：

    **说明：** 若只读实例被删除，则该实例的权重会被自动移除，其他实例权重不变。

    -   延迟阈值：只读实例的延迟阈值，设置范围为0秒-7200秒。若只读实例的延迟时间超过该阈值，则不论当前实例的权重是多少，读请求都不会转发至该实例。受限于SQL的执行情况，只读实例有一定的几率会出现延迟状况，建议该值不小于30秒。

    -   读权重分配：各实例的读请求权重，权重越高，则会处理越多的读取请求。例如，假设某个读写分离地址有1个主实例和3个只读实例，且读权重分别为0、100、200 、200，则代表主实例不处理读请求（写请求会自动都发往主实例执行），其余3个只读实例按照1：2：2的比例处理读请求。有系统分配和自定义两种设置模式：

        -   系统分配：系统会自动根据实例规格分配各个实例的权重。后续该主实例下新增的只读实例，也将自动按照系统权重加入到读写分离链路中，无需手动设置。关于各规格实例的读权重，请参见[系统权重分配规则](intl.zh-CN/用户指南/读写分离/系统权重分配规则.md#)。

        -   自定义：用户可以自行设置各个实例的读请求处理权重，范围为0-10000。若选择自定义模式，后续该主实例下新增只读实例的权重默认为0，需要用户自行设置。

        **说明：** 若您需要某些查询语句获取数据的实时性，可通过Hint格式将这些查询语句强制转发至主实例执行。关于RDS读写分离支持的Hint格式，请参见文档[系统权重分配规则](intl.zh-CN/用户指南/读写分离/系统权重分配规则.md#)中的通过Hint指定SQL发往主实例或只读实例部分。

8.  单击**确定**。

