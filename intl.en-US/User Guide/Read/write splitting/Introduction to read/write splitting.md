# Introduction to read/write splitting {#concept_ptl_fl4_wdb .concept}

## Functions {#section_e1p_hl4_wdb .section}

When read/write splitting is enabled, three types of connection addresses exist in the instances:

-   The connection address of the master instance: The Internet and intranet address can coexist.

-   The connection address of the read-only instance: The Internet and intranet address can coexist.

-   The read/write splitting address: The Internet and intranet address cannot coexist. An intranet address is generated by default. If you must use the read/write splitting Internet address, you can switch the address. For more information, see [Switch read/write splitting address type](intl.en-US/User Guide/Read/write splitting/Switch read/write splitting address type.md#).


The master instance and read-only instance require independent connection addresses. Currently, instance connection addresses are configured automatically in the application to split read and write operations.

With this function, an extra read/write splitting address is provided to link the master instance with all its read-only instances, which enables an automatic link for read/write splitting. Applications can perform read and write operations with a single connection address. Write requests are routed automatically to the master instance and read requests are routed to each read-only instance by user-defined weights. You can scale up the handling capacity of the system by adding more read-only instances without making any changes to the application.

The following figure shows the different connection addresses.

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7914/3095_en-US.png)

## Benefits {#section_tn1_jl4_wdb .section}

-   Facilitates maintenance with a single read/write splitting address.

    The master instance and each read-only instance have an independent connection address. You need to configure each of these addresses in the applications so that write requests go to the master instance and read requests to read-only instances.

    The read/write splitting function provides an additional address called read/write splitting address. You can connect to this address to perform read/write operations on the master and read-only instances, with the read/write requests automatically distributed. Therefore, maintenance costs are reduced.

-   Improves performance with RDS support for the highly secure link.

    For users who build a proxy layer to implement read/write splitting on the cloud, data has to go through multiple components for statement parsing and forwarding before it reaches the database, impacting response latency significantly. RDS read/write splitting can be directly set in the existing highly secure link without time consumption by any other components, which reduces latency and improves processing speed.

-   Applies to various use cases with customizable weights and thresholds.

    RDS read/write splitting can be used to set read request weights for master and read-only instances and latency thresholds for read-only instances.

-   Enhances database availability with instance health check.

    RDS read/write splitting performs health check automatically for all instances in the distribution system. If any instance fails or its latency exceeds the threshold, RDS automatically removes the instance out of the distribution system \(while marking it as unavailable and stopping allocating read requests to it\) and allocates read and write requests to the remaining healthy instances by the predefined weights. In this way, the application still runs normally when any single-node read-only instance fails. After the instance resumes, RDS reclaims it automatically into the request distribution system.

    **Note:** To prevent single-node failures, we recommend that you create at least two read-only instances for each master instance if you are using read/write splitting.

-   Reduces resource and maintenance costs with free service.

    RDS provides all read-only instance users with the read/write splitting function for free.


## Restrictions {#section_pdf_ll4_wdb .section}

-   Currently, the following commands or functions cannot be forwarded to a read-only instance:

    -   The `stmt prepare sql` command is automatically executed on the master instance.

    -   The `stmt prepare command` command cannot be forwarded to a read-only instance before `stmt close`.

    -   The environment configuration variables of `set global`, `set user`, and `set once` are automatically executed on the master instance.

-   The following commands or functions are not supported currently:

    -   SSL encryption

    -   Compression protocols

    -   com\_dump\_table and com\_change\_user protocols

    -   `kill connection [query]`

    -   `change user`

-   The execution result is random for the following commands:

    The `show processlist`, `show master status`, and `com_process_info` commands return results according to the instance connected during execution.

-   All transactions are routed to the primary database.

-   Read/write splitting does not guarantee consistency of non-transactional reads. If you require such consistency, add hints to route query requests to the primary database or encapsulate query requests in transactions.

-   The `LAST_INSERT_ID()` function is not supported. To use this function, add `hint：/*FORCE_MASTER*/, eg:/*FORCE_MASTER*/ SELECTLAST_INSERT_ID();` to the request.

## FAQ {#section_r1t_xs4_wdb .section}

-   [How does read/write splitting ensure the timeliness of data reading?](https://www.alibabacloud.com/help/faq-detail/52221.htm)


